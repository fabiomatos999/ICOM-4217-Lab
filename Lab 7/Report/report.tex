\documentclass[journal]{IEEEtran}
\hyphenation{op-tical net-works semi-conduc-tor}
\usepackage{siunitx}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{hyperref}
\usepackage{float}
\usepackage{tabularx}
\usepackage{unicode}
\usepackage[table]{xcolor}
\newcommand\createfigure[2]{
  \begin{figure}[H]
    \centering \includegraphics[width=0.4\textwidth]{#1}
    \caption{#2}
  \end{figure}}
\begin{document}
\title{Experiment 6 Tasks\\ Lab Report} \author{Fabio J. Matos
  Nieves (802-18-6134), Enrique Chompre Gonzalez (802-18-6106), \\Guillermo Col√≥n Bernardi (802-16-1272)}
\maketitle
\begin{abstract}
  The purpose of this document is to detail an implementation of the UART and I\textsuperscript{2}C communication protocols using an MSP430 microcontroller, a RS-232-USB adapter, and a I\textsuperscript{2}C real time clock chip.
\end{abstract}
\begin{IEEEkeywords}
  MCU, UART, I\textsuperscript{2}C, RTC, RS-232, USB, LCD
\end{IEEEkeywords}
\IEEEpeerreviewmaketitle
\section{Introduction}
\IEEEPARstart{T}{he} first task of this laboratory assignment consists of configuring a UART controller on a MSP430 to send a ``Hello World!'' message via a RS-232 to USB adapter. UART is a asynchronous communication protocol used in a wise variety of applications such as Bluetooth adapters and RS-232. Asynchronous in this context refers to the fact that the clock signals for the sender and receiver are not the same, but their communication speed is matched, i.e if the sender is operating at 9600 baud, the receiver also has to operate at 9600 baud. For the second task of this assignment, a computer and an LCD was used to send write characters to the LCD via the UART. Note, the LCD is the same as used in previous laboratory assignments. The third task of this laboratory assignment consists of configuring MSP430 to communicate with a real time clock (RTC) using the I\textsuperscript{2}C protocol and display the time since boot on an LCD display. I\textsuperscript{2}C is communication protocol like UART but it is synchronous, meaning it uses the master clock for synchronization, and it only has 1 channel for data (SDA). The complementary task for this assignment is an extention of the third task that implements an alarm clock with 3 push buttons and shows the date and time on an LCD.
\section{Materials and Methods}
Materials:
\begin{itemize}
  \item 1 Development board
  \item 1 IDE application
  \item 1 LCD display: 2 lines, 16 characters
  \item 1 1/4\si{\watt} Carbon fill resistor 1\si{\kilo\ohm}
  \item 5 1/4\si{\watt} Carbon fill resistor 4.7\si{\kilo\ohm}
  \item 3 Momentary Switch
  \item I\textsuperscript{2}C Real-Time clock calendar
  \item 1 Quartz crystal
  \item 1 3V Lithium Battery
  \item 1 Piezoelectric buzzer
  \item 1 USB-To-UART converter cable
\end{itemize}
Methods:\\
The first complementary task was implemented by first finding a correct combination of  clock prescaler and modulation pattern that minimizes that error in transmission. Luckily, the table 36-4 from the MSP430 x5xx and x6xx gives a table of clock prescalers and modulation patterns that minimize error when transmitting and receiving data. Since, according to the assignment the baud rate that was selected was 9600 baud, the combination of clock source, clock prescaler and modulation pattern that minimizes error is using a 1.048576\si{\mega\hertz} clock source, a 109 prescaler value and modulation pattern 2. Then transmitter interrupts were enabled and an ISR was created to print of the string ``Hello World!'' trough the transmitter channel 1 character at a time when the transmitter is ready to send. Finally, a newline and a carrage return is inserted at the end to indicate a end of transmition.\\ The second assignment was just a extention of the first, that being that instead of handling transmitter interrupts, it handles receiver interrupts from the USB-RS232 adapter, and sending them to an LCD display. To accomplish this, the ISR from the previous assignment was modified to handle receiver interrupts and in the main function enabled receiver interrupts and disbled transmitter interrupts. Within the receiver ISR the received character is copied to a global variable and then that global variable is sent to the LCD display via a library function. As an added bonus, the characters sent to the LCD are also sent to the serial monitor via the transmitter.\\
\section{Results}
\nocite{rojasEmbeddedSystemsDesign2016}
\nocite{LCDControllerDatasheets}
\bibliographystyle{IEEEtran}
\bibliography{./references.bib}
\end{document}
