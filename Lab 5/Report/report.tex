\documentclass[journal]{IEEEtran}
\hyphenation{op-tical net-works semi-conduc-tor}
\usepackage{siunitx}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{hyperref}
\usepackage{float}
\usepackage{tabularx}
\usepackage{unicode}
\usepackage[table]{xcolor}
\newcommand\createfigure[2]{
  \begin{figure}[H]
    \centering \includegraphics[width=0.4\textwidth]{#1}
    \caption{#2}
  \end{figure}}
\begin{document}
\title{Experiment 5 Tasks\\ Lab Report} \author{Fabio J. Matos
  Nieves, Enrique Chompre Gonzalez, Guillermo Col√≥n Bernadi}
\maketitle
\begin{abstract}
  The purpose of this document is to detail our implementation of the
  complementary tasks from the fifth experiment of the ICOM 4217 Laboratory.
\end{abstract}
\begin{IEEEkeywords}
  MCU, LDC, Display, Pins, LED, Keypad, PWM
\end{IEEEkeywords}
\IEEEpeerreviewmaketitle
\section{Introduction}
\IEEEPARstart{T}{he} purpose of this lab was to:\\
\begin{itemize}
  \item Understanding how low-power modes help to reduce the energy consumption of embedded system
  \item Using low-power modes to improve the power performance of an embedded application
  \item Identifying and understanding PWM architectures and operating modes
  \item Using a PWM module to control electronic devices such as LEDs
  \item Interfacing an LCD, LED and a keypad using a microcontroller
\end{itemize}
\section{Materials and Methods}
Materials:
\begin{itemize}
  \item 1 Development Board
  \item 1 IDE application
  \item 2 line, 16 character LCD display.
  \item 1 5mm Red LED
  \item 1 5mm RGB LED
  \item 1 1/4W 220\si{\ohm} Carbon fill resistor.
  \item 3 1/4W 510\si{\ohm} Carbon fill resistor.
  \item 4 1/4W 4.7K\si{\ohm} Carbon fill resistor.
  \item Momentary Switch (Pushbutton)
  \item 1 3x4 Keypad
  \item 1 Multimeter
\end{itemize}
Methods:\\
Firstly we setup the development board using the program and hardware configuration from Experiment \#2 with polling and supplied power to the development board using 3.3\si{\volt} on the VCC pin on RF3 and a multimeter in series with the ground of power supply. This resulted in $Average I_{CC}1 = 0.597\si{\mA}$ and while scrolling the current peaked up to $0.8\si{\mA}$. Afterwards, we edited the code from experiment 2 to use interrupts and low power mode 4 (LPM4) which resulted $Average I_{CC}2 = 0.412\si{\mA}$. Interestingly, the current while scrolling was higher than the version of the code using polling (upwards up 0.9\si{mA}) and this is due to the fact that the CPU within the MCU was turned off by using LPM4 and has to restart when it receives an interrupt. In section 5.2.2 of the experiment we setup PWM signal generation on P1.2 at 1\si{\kHz} and then we completed tables 5.2 and 5.2.
\begin{table}[H]
  \begin{center}
  \begin{tabularx}{0.4\textwidth}{|X|X|X|X|}
    \hline
    \rowcolor{gray}
    Frequency & Period & Period Register Value & 50\% Duty cycle (DC) register value\\
    \hline
    500\si{\Hz} & 2000\si{us} & 2000 & 1000\\
    \hline
    1\si{\kHz} & 1000\si{us} & 1000 & 500\\
    \hline
    2\si{\kHz} & 500\si{us} 500 & 500 & 250\\
    \hline
    4\si{\kHz} & 250\si{us} & 250 & 125\\
    \hline
    8\si{\kHz} & 125\si{us} & 125 & 62 \\
    \hline
  \end{tabularx}
  \caption{Timer MCU Values}
  \end{center}
\end{table}
\begin{table}[H]
  \begin{center}
  \begin{tabularx}{0.4\textwidth}{|X|X|X|X|}
    \hline
    \rowcolor{gray}
    \hline
    500\si{\Hz} & Measured T & Measured DC & \% Error DC \\
    \hline
    1\si{\kHz} & 1.002\si{kHz} & 49.5\% & 1\% \\
    \hline
    2\si{\kHz} & 503\si{Hz} & 49.7\% & 0.6\%\\
    \hline
    4\si{\kHz}  & 4.0\si{kHz} & 48\% & 4\%\\
    \hline
    8\si{\kHz} & 8\si{kHz} & 44\% & 12\%\\
    \hline
  \end{tabularx}
  \caption{Timer MCU Values}
  \end{center}
\end{table}
\section{Results}
\nocite{rojasEmbeddedSystemsDesign2016}
\nocite{LCDControllerDatasheets}
\bibliographystyle{IEEEtran}
\bibliography{./references.bib}
\end{document}
