\documentclass[journal]{IEEEtran} \hyphenation{op-tical net-works
  semi-conduc-tor} \usepackage{textgreek} \usepackage{graphicx}
\usepackage{listings} \usepackage{hyperref} \usepackage{float}
\usepackage{tabularx}

\newcommand\createfigure[2]{
  \begin{figure}[H]
    \centering \includegraphics[width=0.4\textwidth]{#1}
    \caption{#2}
  \end{figure}}

\begin{document}
\title{Experiment 4 Complementary Tasks\\ Lab Report} \author{Fabio J. Matos
  Nieves, Enrique Chompre Gonzalez, Guillermo Col√≥n Bernardi}
\maketitle
\begin{abstract}
  The purpose of this document is to detail our implementation of the
  complementary tasks from the fourth experiment of the ICOM 4217 Laboratory.
\end{abstract}
\begin{IEEEkeywords}
  MCU, LDC, Display, Pins,
\end{IEEEkeywords}
\IEEEpeerreviewmaketitle

\section{Introduction}
\IEEEPARstart{T}{he} purpose of this lab was to:

\begin{enumerate}
  \item Understanding the uses of timers in embedded applications
  \item Identifying and understand timer architectures and operating modes
  \item Configuring and using the timer modules
  \item Interfacing 7-segment displays to microcontrollers
  \item Implementing software techniques to display information in 7-segment displays
  modules
\end{enumerate}

\section{Materials and Methods}

Materials:

\begin{itemize}
  \item 1 Development Board
  \item 1 IDE Application
  \item 1 Dual 7-Segment Common Anode
  \item 10 1/4W Carbon fill resistor 220\textOmega
  \item 3 1/4W Carbon fill resistor 1K\textOmega
  \item 1 1/4W Carbon fill resistor 4.7K\textOmega
  \item 2 1/4W Carbon fill resistor 12K\textOmega
  \item 1 Momentary switch
  \item 2 Optoswitch
  \item 1 Piezoelectric buzzer
  \item 2 BJT PNP transistor\\
\end{itemize}

Methods:\\


First, we produced an audible sound using delays generated by polling the timer's Top count
flag. Afther making this, we used the following frequencies to change the tones of the buzzer using
the pushbutton connected to the MCU.\\

\begin{itemize}
  \item Clock Frequency: 32,768 Hz\\
  \item Timer's Bits: 0x110\\
  \item Preescaler used: 1/\\
\end{itemize}
\begin{table}[H]
  \ref{periods}

\begin{center}
\begin{tabularx}{0.4\textwidth}{|X|X|X|X|}
  \hline
  Frequency & Period & Period/2 & Compare register value needed\\
  \hline
  500 Hz & 2ms & 1ms & 0x20\\
  \hline
  1 KHz & 1ms & 0.5ms & 0x10\\
  \hline
  1.5 KHz & 0.667ms & 0.333ms & 0x11\\
  \hline
  2 KHz & 0.5ms & 0.25ms & 0x09\\
  \hline
  3 KHz & 0.333ms & 0.167ms & 0x06\\
  \hline
\end{tabularx}
\caption{\label{periods}Timer MCU Periods}
\end{center}
\end{table}


In the second part of this laboratory, we produced an audible sound using delays
generated by the timer's interrupt using the same setup developed before. We used the same
frequencies listed in the previous table and using the pushbutton connected to the MCU to make the
frequencies change between each other. After that, we generated a counter from 0 to F displaying the number on a 7-segment display. A program was writen
so that every second the 7-Segmnet display changes digits using a timer ISR. Later we generated a counter that goes from 00
to FF unsing dynamic display techniques. The following table explains the segment names for each digit. 

\begin{table}[H]
  \ref{segments}

\begin{center}
\begin{tabularx}{0.4\textwidth}{|X|X|X|X|X|X|X|X|X|X|}
  \hline
  \# & dp & g & f & e & d & c & b & a & 7-seg\\
  \hline
  0 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & C0h\\
  \hline
  1 & 1 & 1 & 1 & 1 & 1 & 0 & 0 & 1 & F9h\\
  \hline
  2 & 1 & 0 & 1 & 0 & 0 & 1 & 0 & 0 & A4h\\
  \hline
  3 & 1 & 0 & 1 & 1 & 0 & 0 & 0 & 0 & B0h\\
  \hline
  4 & 1 & 0 & 0 & 1 & 1 & 0 & 0 & 1 & 99h\\
  \hline
  5 & 1 & 0 & 0 & 1 & 0 & 0 & 1 & 0 & 92h\\
  \hline
  6 & 1 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 82h\\
  \hline
  7 & 1 & 1 & 1 & 1 & 1 & 0 & 0 & 0 & F8h\\
  \hline
  8 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 80h\\
  \hline
  9 & 1 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 90h\\
  \hline
  A & 1 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 88h\\
  \hline
  B & 1 & 0 & 0 & 0 & 0 & 0 & 1 & 1 & 83h\\
  \hline
  C & 1 & 1 & 0 & 0 & 0 & 1 & 1 & 0 & C6h\\
  \hline
  D & 1 & 0 & 1 & 0 & 0 & 0 & 0 & 1 & A1h\\
  \hline
  E & 1 & 0 & 0 & 0 & 0 & 1 & 1 & 0 & 86h\\
  \hline
  F & 1 & 0 & 0 & 0 & 1 & 1 & 1 & 0 & 8Eh\\
  \hline


\end{tabularx}
\caption{\label{segments}Codes for 7-segment display of digits from 0 to F}
\end{center}
\end{table}



For the other section we generate a counter from 00 to FF using dynamic
display techniques to display the two numbers into the 7-segment display.
Here we understood how dynamic display and its implications work. Finally, for the Complementary Task
we made the implementation of a tachometer for the encoder wheel
built in Experiment 3. We used the LCD for displaying in the first line a message with
the speed: Speed=\#\#\#RPM while in the second line indicate whether the rotation direction is clockwise or
counterclockwise. To determine the speed of rotation of the wheel and its direction we used the timer and interrupts.

\section{Results}

\createfigure{./Figures/4.2.3.jpg}{Hardware Configuration for 4.2.3 and 4.2.4}
\createfigure{./Figures/4.3.1.jpg}{Hardware Configuration for 4.3.1}

\nocite{rojasEmbeddedSystemsDesign2016}
\nocite{LCDControllerDatasheets}
\bibliographystyle{IEEEtran}
\bibliography{./references.bib}
\end{document}
